<div ng-show="loading">
    Lade Daten...
</div>
<div ng-show="!loading">
    <div class="row">
        <div class="span6">
            <div class="btn-group">
                <button class="btn" ng-class="modeButtonClass('on')" ng-click="changeMode('on')">Immer an</button>
                <button class="btn" ng-class="modeButtonClass('off')" ng-click="changeMode('off')">Immer aus</button>
                <button class="btn" ng-class="modeButtonClass('timed')" ng-click="changeMode('timed')">Zeitgesteuert</button>
            </div>
        </div>
        <div class="span6">
            <div class="pull-right">
                <span class="label" ng-class="statusEnabledLabelClass()">{{status.enabled | app.heatingEnabled}}</span>
            </div>
        </div>
    </div>

    <div ng-show="config.mode == 'timed'">

        <form class="form-inline app-active-weekly-set">
            <label>Aktive Wochen-Konfiguration:</label>
            <select ng-options="s.name for s in config.weekly.sets" ng-model="activeWeeklySet"></select>
            <button ng-click="apply()" ng-show="showApplyButton()" class="btn btn-primary" ng-disabled="applying">Übernehmen</button>
        </form>

        <form name="specialsForm" class="form-inline app-special-times">
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th colspan="4">
                        Spezielle Heizzeiten
                        <a ng-click="addSpecial()" class="app-special-add">Hinzufügen</a>
                    </th>
                </tr>
                <tr ng-show="specials.length > 0">
                    <th class="app-special-column-from">Von</th>
                    <th class="app-special-column-to">Bis</th>
                    <th>Heizung an/aus</th>
                    <th class="app-special-column-remove">Entfernen</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="special in specials">
                    <td><input type="text" ng-model="special.start" app-date class="app-datetimefield" /></td>
                    <td><input type="text" ng-model="special.stop" app-date class="app-datetimefield" /></td>
                    <td>
                        <label class="radio inline">
                            <input type="radio" ng-model="special.enabled" ng-value="true" />
                            An
                        </label>
                        <label class="radio inline">
                            <input type="radio" ng-model="special.enabled" ng-value="false"/>
                            Aus
                        </label>
                    </td>
                    <td class="app-special-column-remove">
                        <a title="Heizzeit entfernen" ng-click="deleteSpecial($index)" class="app-formline">&#x2718;</a>
                    </td>
                </tr>
                <tr ng-show="specials.length == 0">
                    <td colspan="4"><i>Keine speziellen Heizzeiten vorhanden.</i></td>
                </tr>
            </tbody>
            <tfoot ng-show="isSpecialsDirty()">
                <tr>
                    <td colspan="4">
                        <button class="btn btn-primary" ng-click="saveSpecials()" ng-disabled="specialsForm.$invalid">Alle Änderungen speichern</button>
                        <button class="btn" ng-click="resetSpecials()">Alle Änderungen verwerfen</button>
                    </td>
                </tr>
            </tfoot>
        </table>
        </form>
    </div>
</div>